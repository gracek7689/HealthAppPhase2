<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="exerciseStyles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
  <script type="text/javascript" src="exerciseFunctions.js"></script>

  <title>Health App</title>
</head>

<body>
  <nav class="navbar navbar-expand navbar-light">
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item">
          <button class="nav-link btn btn-link active" id="homeID" onclick="openTab(event, 'Home'); updateProgressBar()">
            <img src="assets/home.png" />
          </button>
        </li>
        <li class="nav-item">
          <button class="nav-link btn btn-link" onclick="openTab(event, 'Food')">
            <img src="assets/foodIcon.png" />
          </button>
        </li>
        <li class="nav-item">
          <button class="nav-link btn btn-link" onclick="openTab(event, 'Exercise')">
            <img src="assets/exerciseIcon.png" />
          </button>
        </li>
        <li class="nav-item">
          <button class="nav-link btn btn-link" onclick="openTab(event, 'ProfileSettings')">
            <img src="assets/profileSettings.png" />
          </button>
        </li>
      </ul>
    </div>
  </nav>


  <div class="container-fluid">
    <!---------------------------- Home Tab Start: ----------------------------->
    <div id="Home" class="tabcontent home" style="display: block">
      <h1 class="tabHeader"><b>Home</b></h1>
      <div class="container home-container">
        <h2 id="home-date" style="font-weight: bold"></h2>
        <br>
        <h3 id="section-title" style="font-size: 100%; margin-top:-3%"><b>NUTRITION</b></h3>
        <div class="nutrition-table-container">
          <table class="w3-table w3-hoverable w3-card nutrition-table">
            <thead>
              <tr>
              <tr>
                <th>Nutrition <br> Type</th>
                <th>Total <br> Intake</th>
                <th>Recommended <br> Intake</th>
              </tr>
            </thead>
            <tbody>
              <tr class="parent-nutrient">
                <td>
                  <span class="arrow"></span>
                  <span class="main-nutrient">Carbohydrate</span>
                </td>
                <td id="carbs-content">189 g</td>
                <td>270 g</td>
              </tr>
              <tr class="child-nutrient carbohydrate">
                <td>Sugars</td>
                <td>7 g</td>
                <td>20 g</td>
              </tr>
              <tr class="child-nutrient carbohydrate">
                <td>Fiber</td>
                <td>17 g</td>
                <td>30 g</td>
              </tr>
              <tr class="child-nutrient carbohydrate">
                <td >Starch</td>
                <td>6 g</td>
                <td>50 g</td>
              </tr>
              <tr class="parent-nutrient">
                <td>
                  <span class="main-nutrient" style='margin-left: 10px'>Protein</span>
                </td>
                <td id="protein-content">64 g</td>
                <td>100 g</td>
              </tr>
              <tr class="parent-nutrient">
                <td>
                  <span class="arrow"></span>
                  <span class="main-nutrient">Fats</span>
                </td>
                <td id="fats-content">61 g</td>
                <td>50 g</td>
              </tr>
              <tr class="child-nutrient fats">
                <td>Saturated</td>
                <td>0.0 g</td>
                <td>12 g</td>
              </tr>
              <tr class="child-nutrient fats">
                <td>Unsaturated</td>
                <td>0.2 g</td>
                <td>38 g</td>
              </tr>
              <tr class="parent-nutrient">
                <td>
                  <span class="main-nutrient">Vitamins</span>
                </td>
                <td id="vitamins-content">9 g</td>
                <td>14 g</td>
              </tr>
              <tr class="parent-nutrient">
                <td>
                  <span class="main-nutrient">Minerals</span>
                </td>
                <td id="minerals-content">4.8 g</td>
                <td>5 g</td>
              </tr>
            </tbody>
          </table>
        </div>

        <br>
        <div class="container pie-chart-container">
          <canvas id="myChart" style="width:100%; background-color: #2B3A55; padding-bottom: 20px;"></canvas>
          <!-- <canvas id="recommendedChart" style="width:100%"></canvas> -->
          <!--https://www.chartjs.org/docs/latest/samples/other-charts/multi-series-pie.html-->
          <!-- Not feeling this current pie chart, may need to use this ^^ -->
        </div>

        <br>
        <div class="container calories-table-container">
          <img src="assets/cals.png" alt="calories image" id="calories-image">
          <table class="card calories-table">
            <tbody>
              <tr>
                <td>Calories Consumed</td>
                <td id="calories-consumed-content">1128 cals</td>
              </tr>
              <tr>
                <td>Recommended Calories</td>
                <td>2100 cals</td>
              </tr>
          </table>
        </div>

        <br>
        <h3 id="section-title" style="font-size: 100%"><b>ACTIVITY</b></h3>
        <div class="card activity-container">
          <div class="w3-grey w3-round-large progress-bar">
            <div class="w3-container w3-sand w3-round-large" id="progress-bar-content" style="width:62%">62%</div>
          </div>
          <div class="w3-container bar-labels-container">
            <span id="left-text" style="color: #FFF7E9; font-size: 70%;">Curr: 980 cals</span>
            <span id="right-text"style="color: #FFF7E9; font-size: 70%;">Target: 2500 cals</span>
          </div>
          <br>
          <div class="container streak-container">
            <img src="assets/blueWorkoutMan.png" alt="calories image" id="calories-image">
            <div class="card streak-card">
              <p id="your-streak"> Your Streak: </p>
              <h2 id="steak-number"> 8 Days</h2>
              <p id="encouragement-message" style="margin: 1%"> Keep going!</p>
            </div>
            <img src="assets/steps.png" alt="calories image" id="steps-image">
            <div class="card steps-card">
              <h2> Steps: </h2>
              <p id="steps-message" style="margin: 1%"> 6593</p>
            </div>
          </div>
        </div>

      </div>
    </div>
    <!---------------------------- Home Tab End----------------------------->
    <!---------------------------- Food Tab Start: --------------------------->
    <div id="Food" class="tabcontent">
      <h1 class="tabHeader">Nutrition</h1>
      <div class="container mt-5">
        <div class="row">
          <div class="col-md-4">
            <label for="newItemInput">Name</label>
            <input type="text" id="newItemInput" class="form-control" oninput="showSuggestions()"
              onkeydown="handleKeyDown(event)" style="font-size:28px" required />
          </div>
          <ul id="suggestions"></ul>
          <div class="col-md-4">
            <label for="newItemCal">Calories</label>
            <input type="number" id="newItemCal" class="form-control" style="font-size:28px" required />
          </div>
          <div class="col-md-4">
            <label for="newItemQty">Quantity</label>
            <input type="number" id="newItemQty" class="form-control" style="font-size:28px" required />
          </div>
          <!-- <div class="col-md-4">
            <label for="newItemDesc">Description</label>
            <input type="text" id="newItemDesc" class="form-control" />
          </div> -->
        </div>
        <div id="moreBoxes" style="display:none;">
          <div class="row mt-3">
            <div class="col-md-4">
              <label for="newItemProtein">Protein</label>
              <input type="number" id="newItemProtein" class="form-control" style="font-size:28px" />
            </div>
            <div class="col-md-4">
              <label for="newItemFat">Fat</label>
              <input type="number" id="newItemFat" class="form-control" style="font-size:28px" />
            </div>
            <div class="col-md-4">
              <label for="newItemCarbs">Carbs</label>
              <input type="number" id="newItemCarbs" class="form-control" style="font-size:28px" />
            </div>
            <div class="col-md-4">
              <label for="newItemVit">Vitamins</label>
              <input type="number" id="newItemVit" class="form-control" style="font-size:28px" />
            </div>
            <div class="col-md-4">
              <label for="newItemMin">Minerals</label>
              <input type="number" id="newItemMin" class="form-control" style="font-size:28px" />
            </div>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-12">

            <button type="button" class="btn btn-xl btn-primary btn-spacing addButton" onclick="addItem()">
              Add Item
            </button>
            <button type="button" class="btn btn-primary btn-xl btn-danger btn-spacing clearButton"
              onclick="clearForms()">
              Clear
            </button>
            <button type="button" class="btn btn-xl btn-secondary btn-spacing clearButton" id="moreBoxesBtn"
              onclick="toggleMoreBoxes()">More Options</button>


          </div>
        </div>
        <ul class="list-group mt-4 custom-list fooditemList" id="itemList" style="height: 600px; overflow-y: auto;">

        </ul>
      </div>
    </div>
    <!------------------------- Exercise Tab Start --------------------------->

    <div id="Exercise" class="tabcontent">
      <h1 class="tabHeader">Exercise</h1>

      <section class="exercise" id="exercise">
        <div class="container" id="exerciseContainer">
          <ul class="card-list" id="userExerciseList"></ul>
        </div>
      </section>
    </div>
  </div>

  <!------------------------- Settings Tab Start --------------------------->

  <div id="ProfileSettings" class="tabcontent">
    <h1 class="tabHeaderProfileSettings">Profile Settings</h1>
    <section class="h-100 gradient-custom-2">
      <div class="container py-5" id="settingsCont">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col col-lg-9 col-xl-7">
            <div class="card"
              style="border-radius: 35px; width: 100%; border-width: 5px; background-color: #FFF7E9; border-color: #2B3A55;">
              <div class=" card-body p-4">
                <div class="mb-3 align-items-center " style="color: #2B3A55; ">
                  <p class="lead fw-normal mb-1" style="font-size: 2.3rem; font-weight: bold; padding-left: 42%;">About</p>
                  <div class="p-4">
                    <table class="table">
                      <tbody>
                        <tr>
                          <th scope="row" style="width: 50%; color: #2B3A55;">Name</th>
                          <td style="color: #2B3A55;">Jim Kam</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Fitness Level</th>
                          <td style="color: #2B3A55;">Beginner</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Age</th>
                          <td style="color: #2B3A55;">27 years</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Current Weight</th>
                          <td style="color: #2B3A55;">180 lbs</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Current Height</th>
                          <td style="color: #2B3A55;">6'3</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Preferred Workouts</th>
                          <td>
                            <ul class="list-group">
                              <li class="list-group-item" style="color: #2B3A55;">Yoga</li>
                              <li class="list-group-item"style="color: #2B3A55;">Cardio</li>

                            </ul>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <p class="lead fw-normal mb-1" style="font-size: 2.3rem; font-weight: bold; padding-left: 35%;">Health Goal</p>
                <div class="p-1" style="background-color: #FFF7E9;">
                  <p style="padding-left: 15%">Lose 10 pounds by June 23, 2023</p>
                </div>
              </div>
              <button type="button" class="btn btn-outline-dark mx-auto mb-3" data-mdb-ripple-color="dark"
                style="font-size: 30px; border-width: 5px; z-index: 1; width: 290px; background-color: #2B3A55; border-radius: 35px; color: #FFF7E9;"
                onclick="editProfile()">
                Edit profile
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>


  </div>
  <!------------------------- Settings Tab End --------------------------->

  </div>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script>

    /* Represents the actual individual workout sessions that users enter. 
    The fields in each mapping (integer => object containing values) are
    dependent on the type of exercise the individual object is (the name field) */
    var baseUserExercises = {
    //   0: {
    //   name: "Curlups",
    //   weight: "15 lbs",
    //   reps: "30x",
    //   distance: false,
    //   duration: false,
    //   calories: 200,
    //   time: "5:36 pm",
    //   date: "Friday, March 28th",
    // },
    // 1: {
    //   name: "Yoga",
    //   weight: false,
    //   reps: false,
    //   distance: false,
    //   duration: "41 min",
    //   calories: 320,
    //   time: "10:40 am",
    //   date: "Thursday, March 28th",
    // },
    // 2: {
    //   name: "Run",
    //   weight: false,
    //   reps: false,
    //   distance: "3.1 miles",
    //   duration: "39 min 12 sec",
    //   calories: 460,
    //   time: "8:31 am",
    //   date: "Wednesday, March 27th",
    // },
    0: {
      name: "Run",
      weight: false,
      reps: false,
      distance: "5 miles",
      duration: "1 hr 10 min 3 sec",
      calories: 460,
      time: "8:31 am",
      date: "Saturday, April 15th",
    },
    1: {
      name: "Run",
      weight: false,
      reps: false,
      distance: "1.5 miles",
      duration: "20 min 5 sec",
      calories: 250,
      time: "3:10 pm",
      date: "Thursday, April 13th",
    },
    2: {
      name: "Run",
      weight: false,
      reps: false,
      distance: "3.1 miles",
      duration: "39 min 12 sec",
      calories: 460,
      time: "8:31 am",
      date: "Tuesday, April 11th",
    },

    };

    // If userExercises has been modified, do not overwrite the changes
    if (localStorage.getItem("userExercises") == null) {
      localStorage.setItem("userExercises", JSON.stringify(baseUserExercises));
    }


    // Will store the contents of userExercises
    var userExercises = {};
    userExercises = JSON.parse(localStorage.getItem("userExercises"));
    var nutrientInfo = {}; 
    console.log("CODE REAHCED HERE")
    nutrientInfo = JSON.parse(localStorage.getItem("foodList"));
    console.log(nutrientInfo)
    console.log("AND HERE")

    function updateProgressBar(){
      var totalCalories = 0;
      var caloriesToBurnTarget = 2500; 
      for (let i = 0; i < Object.keys(userExercises).length; i++){
        totalCalories += parseInt(userExercises[i].calories);
      }
      // document.getElementById('calories-burned-populate').innerHTML = totalCalories + ' cals'
      document.getElementById('left-text').innerHTML = totalCalories + ' cals'

      var progress_ratio = parseFloat(totalCalories)/parseFloat(2500);
      var progerss_percentage = 0; 
      console.log(progress_ratio)
      if (progress_ratio >= 1) {
        progerss_percentage = 100;
      } else {
        progerss_percentage = (progress_ratio * 100).toFixed(2); 
      }

      console.log(progerss_percentage)

      document.getElementById('progress-bar-content').style.width = progerss_percentage.in + '%';
      document.getElementById('progress-bar-content').innerHTML = progerss_percentage + '%';

    }

    updateProgressBar();

    let items = [
      {
        "name": "Apple",
        "calories": 95,
        "quantity": 1,
        "fat":0.3,
        "protein":0.5,
        "carbs":25
      },
      {
        "name": "Banana",
        "calories": 110,
        "quantity": 1,
        "fat":0.67,
        "protein":1,
        "carbs":28
      }, 

      {
        "name": "Pear",
        "calories": 101,
        "quantity": 1,
        "fat":0.285,
        "protein":0.676,
        "carbs":26.9
      }

    ];

    // Make HTTP request to load JSON file for items.json
    let xhr = new XMLHttpRequest();
    xhr.open("GET", "items.json");
    xhr.onload = function () {
      console.log(xhr.status);
      if (xhr.status === 200) {
        console.log("GOT IN HERE");
        // Parse JSON response and store in items array
        items = JSON.parse(xhr.responseText);
      }
    };
    xhr.send();

    document.addEventListener("DOMContentLoaded", function () {
      openTab(event, "Home");
      document.getElementById("homeID").focus();
    });

    console.log(items);

    window.onload = function () {
      // console.log("GARBAGE");
      // console.log(items);
      // console.log("wow");
      document.getElementById("newItemInput").value = items[0].name;
      console.log(document.getElementById("newItemInput").value);
      
      document.getElementById("newItemCal").value = items[0].calories;
      document.getElementById("newItemQty").value = items[0].quantity;
      document.getElementById("newItemProtein").value = items[0].protein;
      document.getElementById("newItemCarbs").value = items[0].carbs;
      document.getElementById("newItemFat").value = items[0].fat;
      addItem();
      // console.log(document.getElementById("newItemInput").value);
      // console.log("CODE REAEDHED here");
      // // console.log(document.getElementById("newItemInput").value);
      // console.log("GARBAGE")
      clearForms();
    };
    function openTab(evt, tabName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("nav-link");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].classList.remove("active");
      }

      document.getElementById(tabName).style.display = "block";

      if (tabName == "Home") {
        userExercises = JSON.parse(localStorage.getItem("userExercises"));
      }

      if (tabName === "Exercise") {
        showUserExercises();
      }
    }

    function editProfile() {
      // Get the container element
      //var container = document.querySelector('.container');
      var container = document.getElementById('ProfileSettings');

      // Replace the current content with a form
      container.innerHTML = `
      <h1 class="tabHeaderProfileSettings">Profile Settings</h1>
    <section class="h-100 gradient-custom-2">
      <div class="container py-5" style="border-color: #2B3A55;" id="settingsCont">
      <div id="formContainer">
  <form class="m-3">
    <label for="name">Name:</label>
    <input type="text" style="width: 500px;" id="name" name="name" placeholder="Jim Kam" value="Jim Kam" required>
    <br>
    <label for="fitnessLevel">Fitness Level:</label>
    <select id="fitnessLevel" name="fitnessLevel">
      <option value="beginner">Beginner</option>
      <option value="intermediate">Intermediate</option>
      <option value="advanced">Advanced</option>
    </select><br>
    
    
    <label for="age">Age (Years):</label>
    <input type="text" style = "width: 150px;" id="age" name="age" value="27" required><br>
    <label for="currentWeight">Current Weight (lbs):</label>
    <input type="text" style = "width: 150px;" id="currentWeight" value="180" name="currentWeight" required><br>
    <label for="currentHeight">Current Height:</label>
    <input type="text" style = "width: 150px;" id="currentHeight" value="6'3" name="currentHeight" required><br>
    <br>
    <br>
    <label for="healthGoals">Health Goal:</label>
<select id="healthGoals" name="healthGoals">
  <option value="none">None</option>
  <option value="loseWeight">Lose Weight</option>
  <option value="tone">Tone and Maintain Weight</option>
  <option value="gainWeight">Gain Weight</option>
  <option value="other">Other</option>
</select>
<div id="weightLossFields" style="display: none;">
  <label for="targetWeight">Target Pounds to Lose (lbs):</label>
  <input type="text" style = "width: 150px;" id="targetWeightLoss" name="targetWeight" required>
  <br>
  <label for="targetDate">Target Date:</label>
  <input type="date" id="targetDate" name="targetDate" required>
  <br>
</div>
<div id="weightGainFields" style="display: none;">
  <label for="targetWeight">Target Pounds to Gain (lbs):</label>
  <input type="text" style = "width: 150px;" id="targetWeightGain" name="targetWeight" required>
  <br>
  <label for="targetDate">Target Date:</label>
  <input type="date" id="targetDate" name="targetDate" required>
  <br>
</div>
<label for="otherHealthGoal" id="instructions" name="otherHealthGoal" style="display:none;">Input other health goal: </label>
<input type="text" style="width: 600px;" id="otherHealthGoal" name="otherHealthGoal" style="display:none;">
<br><br>
    
<label for="preferredWorkouts">Preferred Workouts:</label><br>
    <input type="checkbox" id="workout1" name="preferredWorkouts" value="Yoga" value="yes" checked>
    <label for="workout1">Yoga</label><br>
    <input type="checkbox" id="workout2" name="preferredWorkouts" value="Cardio" value="yes" checked>
    <label for="workout2">Cardio</label><br>
    <input type="checkbox" id="workout3" name="preferredWorkouts" value="Strength Training">
    <label for="workout3">Strength Training</label><br><br>
<div style="display: flex; justify-content: center;">
  <button type="button" class="btn btn-outline-dark" style = "font-size: 30px; border-width: 5px; width: 290px; background-color: #2B3A55; border-radius: 35px; color: #FFF7E9;" onclick="saveChanges()">
    Save Changes
  </button>
</div> 


</form>
</div>
</div>
<div class="input-container">
  <img src="assets/keyboardImage.jpg" alt="keyboard" class="keyboard-image">

</div>
    </section>
   
  `;
      var nameTextField = document.getElementById("name");
      var weightTextField = document.getElementById("currentWeight");
      var heightField = document.getElementById("currentHeight");
      var ageField = document.getElementById("age");
      var weightLoss = document.getElementById("targetWeightLoss");
      var weightGain = document.getElementById("targetWeightGain");
      var otherHealthGoal = document.getElementById("otherHealthGoal");


      var keyboardImage = document.querySelector(".keyboard-image");

      nameTextField.addEventListener("focus", function () {
        keyboardImage.style.display = "block";
      });

      nameTextField.addEventListener("blur", function () {
        keyboardImage.style.display = "none";
      });
      weightTextField.addEventListener("focus", function () {
        keyboardImage.style.display = "block";
      });

      weightTextField.addEventListener("blur", function () {
        keyboardImage.style.display = "none";
      });
      heightField.addEventListener("focus", function () {
        keyboardImage.style.display = "block";
      });

      heightField.addEventListener("blur", function () {
        keyboardImage.style.display = "none";
      });
      ageField.addEventListener("focus", function () {
        keyboardImage.style.display = "block";
      });

      ageField.addEventListener("blur", function () {
        keyboardImage.style.display = "none";
      });

      weightLoss.addEventListener("focus", function () {
        keyboardImage.style.display = "block";
      });

      weightLoss.addEventListener("blur", function () {
        keyboardImage.style.display = "none";
      });
      weightGain.addEventListener("focus", function () {
        keyboardImage.style.display = "block";
      });

      weightGain.addEventListener("blur", function () {
        keyboardImage.style.display = "none";
      });
      otherHealthGoal.addEventListener("focus", function () {
        keyboardImage.style.display = "block";
      });

      otherHealthGoal.addEventListener("blur", function () {
        keyboardImage.style.display = "none";
      });
      var healthGoalsSelect = document.getElementById('healthGoals');
      var otherHealthGoalInput = document.getElementById('otherHealthGoal');
      var otherHealthGoal = document.getElementById('instructions');
      var weightLossFields = document.getElementById('weightLossFields');
      var weightGainFields = document.getElementById('weightGainFields');
      otherHealthGoalInput.style.display = 'none';
      healthGoalsSelect.addEventListener('change', function () {
        if (healthGoalsSelect.value == 'other') {
          otherHealthGoalInput.style.display = 'block';
          otherHealthGoal.style.display = 'block';
          weightLossFields.style.display = 'none';
          weightGainFields.style.display = 'none';

        } else {
          if (healthGoalsSelect.value == 'loseWeight') {
            weightLossFields.style.display = 'block';


          } else {
            weightLossFields.style.display = 'none';

          }
          if (healthGoalsSelect.value == 'gainWeight') {
            weightGainFields.style.display = 'block';

          } else {
            weightGainFields.style.display = 'none';

          }
          otherHealthGoalInput.style.display = 'none';
          otherHealthGoal.style.display = 'none';

        }
      });


    }

    function saveChanges() {
      // Get the container element
      //var container = document.querySelector('.container');
      var container = document.getElementById('settingsCont');

      // Replace the current content with a form
      container.innerHTML = `
      <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col col-lg-9 col-xl-7">
            <div class="card"
              style="border-radius: 35px; width: 100%; border-width: 5px; background-color: #FFF7E9; border-color: #2B3A55;">
              <div class=" card-body p-4">
                <div class="mb-3 align-items-center " style="color: #2B3A55; ">
                  <p class="lead fw-normal mb-1" style="font-size: 2.3rem; font-weight: bold; padding-left: 42%;">About</p>
                  <div class="p-4">
                    <table class="table">
                      <tbody>
                        <tr>
                          <th scope="row" style="width: 50%; color: #2B3A55;">Name</th>
                          <td style="color: #2B3A55;">Jim Kam</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Fitness Level</th>
                          <td style="color: #2B3A55;">Beginner</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Age</th>
                          <td style="color: #2B3A55;">27 years</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Current Weight</th>
                          <td style="color: #2B3A55;">180 lbs</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Current Height</th>
                          <td style="color: #2B3A55;">6'3</td>
                        </tr>
                        <tr>
                          <th scope="row" style="color: #2B3A55;">Preferred Workouts</th>
                          <td>
                            <ul class="list-group">
                              <li class="list-group-item" style="color: #2B3A55;">Yoga</li>
                              <li class="list-group-item"style="color: #2B3A55;">Cardio</li>

                            </ul>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <p class="lead fw-normal mb-1" style="font-size: 2.3rem; font-weight: bold; padding-left: 35%;">Health Goal</p>
                <div class="p-1" style="background-color: #FFF7E9;">
                  <p style="padding-left: 15%">Lose 10 pounds by June 23, 2023</p>
                </div>
              </div>
              <button type="button" class="btn btn-outline-dark mx-auto mb-3" data-mdb-ripple-color="dark"
                style="font-size: 30px; border-width: 5px; z-index: 1; width: 290px; background-color: #2B3A55; border-radius: 35px; color: #FFF7E9;"
                onclick="editProfile()">
                Edit profile
              </button>
            </div>
          </div>
      `
    }

    /*******************************/
    /********* FOOD PAGE ***********/
    /*******************************/

    var foodList = [];

    // Create an XMLHttpRequest object
    var xhs = new XMLHttpRequest();

    // Define the function to be called when the response is received
    xhs.onreadystatechange = function () {
      if (this.readyState == 4 && this.status == 200) {
        // Parse the response text as JSON
        foodList = JSON.parse(this.responseText);

        // Do something with the data
        console.log(foodList);
      }
    };

    function showNutrition(li) {
      var id = li.getAttribute("data-id");
      var item = foodList.find(function (item) {
        return item.id === id;
      });

      var nutrition = li.querySelector(".nutrition");
      if (nutrition.style.display === "none") {
        nutrition.style.display = "block";
        nutrition.innerHTML = "Protein: " + item.protein + "g<br>Carbs: " + item.carbs + "g";
      } else {
        nutrition.style.display = "none";
        nutrition.innerHTML = "";
      }
    }


    var xValues = ["Carbs", "Fats", "Vitamins", "Minerals", "Proteins"];
    var yValues = [189, 50, 9, 4.8, 100];

    function addItem() {
      console.log("WE LOADED IN ON LOAD");
      // Get the input field value
      var newItem = document.getElementById("newItemInput").value;
      var newCal = document.getElementById("newItemCal").value;
      // var newDescription = document.getElementById("newItemDesc").value;
      var newQty = document.getElementById("newItemQty").value;
      var newFat = document.getElementById("newItemFat").value || 0;
      var newProtein = document.getElementById("newItemProtein").value || 0;
      var newCarbs = document.getElementById("newItemCarbs").value || 0;
      var newMin = document.getElementById("newItemMin").value || 0
      var newVit = document.getElementById("newItemVit").value || 0


      var br = document.createElement("br");
      console.log("This is a test");
      console.log(newItem);
      if (newItem === "" || newQty === "" || newCal === "") {
        return;
      }
      //Have something like this for protein fats, carbs... and set to 0 if field empty
      // if (newItem === "" || newQty === "" || newCal === "") {
      // return;
      // }
      var newID = Math.random().toString(36).substr(2, 9);


      var newItemObject = {
        id: newID,
        name: newItem,
        // description: newDescription,
        calories: newCal,
        quantity: newQty,
        fat: newFat,
        protein: newProtein,
        carbs: newCarbs,
        minerals: newMin,
        vitamins: newVit
      };


      foodList.push(newItemObject);
      // calculateNutrition();
      
      // Create a new li element with remove button
      var li = document.createElement("li");
      li.className = "list-group-item";
      li.appendChild(document.createTextNode(newItem));
      li.appendChild(document.createElement("br"));
      li.appendChild(document.createTextNode("Cals:\t"));
      li.appendChild(document.createTextNode(newCal));
      li.appendChild(document.createElement("br"));
      li.appendChild(document.createTextNode("Quantity:\t"));
      li.appendChild(document.createTextNode(newQty));
      li.setAttribute("data-item-id", newID);
      li.addEventListener("click", function () {
        expandItem(this);
      });
      function expandItem(item) {
        var id = item.getAttribute("data-item-id");
        var itemData = foodList.find(function (element) {
          return element.id === id;
        });

        var details = item.querySelector(".item-details");
        if (!details) {
          // Create details element if it doesn't exist
          details = document.createElement("div");
          details.className = "item-details";
          details.innerHTML =
            "Protein: " + itemData.protein + "<br>" +
            "Fats: " + itemData.fat + "<br>" +
            "Carbs: " + itemData.carbs + "<br>" +
            "Vitamins: " + itemData.vitamins + "<br>" +
            "Minerals: " + itemData.minerals + "<br>";

          item.appendChild(details);
        } else {
          // Toggle visibility of details element
          details.style.display = details.style.display === "none" ? "block" : "none";
        }
      }

      var removeBtn = document.createElement("button");
      removeBtn.className = "btn btn-danger btn-sm float-right";
      removeBtn.appendChild(document.createTextNode("Remove"));
      removeBtn.onclick = function () {
        removeItem(this);
      };
      li.appendChild(removeBtn);

      // Add the new li element to the list
      document.getElementById("itemList").appendChild(li);

      // Clear the input field
      // document.getElementById("newItemInput").value = "";
      // document.getElementById("newItemDesc").value = "";
      // document.getElementById("newItemQty").value = "";
      // document.getElementById("newItemCal").value = "";

      //###########################
      // Logic for appending total calories and updating pie chart
      localStorage.setItem('foodList', JSON.stringify(foodList));
      console.log("BOHOOOO");
      var currFoodList = {};
      var currFoodList = JSON.parse(localStorage.getItem('foodList'));

      let totalCalories = 0;
      let totalCarbs = 0;
      let totalProtein = 0; 
      let totalFats = 0;
      let totalVitamins = 0; 
      let totalMinerals = 0; 
      console.log(currFoodList[0]);
      for (let i = 0; i < Object.keys(currFoodList).length; i++){
        totalCalories += parseFloat(currFoodList[i].calories);
        totalCarbs += parseFloat(currFoodList[i].carbs);
        totalProtein += parseFloat(currFoodList[i].protein);
        totalFats += parseFloat(currFoodList[i].fat);
        totalVitamins += 0.1;
        totalMinerals += 0.2;
      }

      yValues[0] = yValues[0] + totalCarbs
      yValues[1] = yValues[1] + totalFats
      yValues[2] = yValues[2] + totalVitamins
      yValues[3] = yValues[3] + totalProtein
      yValues[4] = yValues[4] + totalProtein
      
      document.getElementById('calories-consumed-content').innerHTML = totalCalories.toFixed(0) + ' cals';
      document.getElementById('carbs-content').innerHTML = totalCarbs.toFixed(2) + ' g';
      document.getElementById('protein-content').innerHTML = totalProtein.toFixed(2) + ' g';
      document.getElementById('fats-content').innerHTML = totalFats.toFixed(2) + ' g';
      document.getElementById('vitamins-content').innerHTML = totalVitamins.toFixed(2)  + ' g';
      document.getElementById('minerals-content').innerHTML = totalMinerals.toFixed(2)  + ' g';

      //#############################

      var itemList = document.getElementById("itemList");
      itemList.scrollTop = itemList.scrollHeight;
      var existingItem = items.find(function (item) {
        return item.name.toLowerCase() === newItem.toLowerCase();
      });
      if (existingItem) {
        // console.log("Item already exsits")
      }
      else {
        items.push(newItemObject);
      }
      // console.log(items);
      clearForms();
    }

    

    function removeItem(button) {
      // Get the parent li element
      var li = button.parentNode;

      // Get the ID of the item to remove
      // var itemId = li.getAttribute("data-item-id");
      var itemId = li.getAttribute("data-item-id");

      // Find the index of the item with that ID in the foodList array
      var itemIndex = foodList.findIndex(function (item) {
        return item.id === itemId;
      });

      // If the item was found, remove it from the foodList array
      if (itemIndex !== -1) {
        foodList.splice(itemIndex, 1);
        localStorage.setItem('foodList', JSON.stringify(foodList));
        // fs.writeFileSync("userFood.json", JSON.stringify(data));
      }

      // Remove the li element from the list
      document.getElementById("itemList").removeChild(li);


      // localStorage.setItem('foodList',JSON.stringify(foodList));

    }
    function toggleMoreBoxes() {
      var moreBoxes = document.getElementById("moreBoxes");
      var moreBoxesBtn = document.getElementById("moreBoxesBtn");
      if (moreBoxes.style.display === "none") {
        moreBoxes.style.display = "block";
        moreBoxesBtn.textContent = "Less Options";
      } else {
        moreBoxes.style.display = "none";
        moreBoxesBtn.textContent = "More Options";
      }
    }

    function showSuggestions() {
      let input = document.getElementById("newItemInput");
      let inputValue = input.value.trim().toLowerCase();

      // Get the list of items that match the input value
      let matchingItems = items.filter((item) =>
        item.name.toLowerCase().startsWith(inputValue)
      );

      // Clear the suggestions
      clearSuggestions();

      if (inputValue === "") {
        return;
      }

      if (matchingItems.length === 0) {
        let suggestionsList = document.getElementById("suggestions");
        suggestionsList.style.display = "none";
        return;
      }

      // Add the matching items to the suggestions list
      let suggestionsList = document.getElementById("suggestions");
      suggestionsList.style.display = "block";

      // Position the suggestions list below the input element
      let inputRect = input.getBoundingClientRect();
      suggestionsList.style.left = inputRect.left + "px";
      suggestionsList.style.top = inputRect.bottom + "px";

      matchingItems.forEach((item) => {
        let suggestion = document.createElement("li");
        suggestion.textContent = item.name;
        suggestion.addEventListener("click", () => {
          fillFields(item);
          clearSuggestions();
        });
        suggestionsList.appendChild(suggestion);
      });
    }

    function handleKeyDown(event) {
      let input = document.getElementById("newItemInput");
      let inputValue = input.value;

      // Check for backspace key
      if (event.keyCode === 8 && inputValue.length === 0) {
        clearSuggestions();
      }
    }

    function fillFields(item) {
      let nameField = document.getElementById("newItemInput");
      // let descField = document.getElementById("newItemDesc");
      let qtyField = document.getElementById("newItemQty");
      let calField = document.getElementById("newItemCal");
      let proField = document.getElementById("newItemProtein");
      let fatField = document.getElementById("newItemFat");
      let carbField = document.getElementById("newItemCarbs");
      let vitField = document.getElementById("newItemVit");
      let minField = document.getElementById("newItemMin");
      nameField.value = item.name;
      qtyField.value = item.quantity;
      calField.value = item.calories;
      proField.value = item.protein;
      fatField.value = item.fat;
      carbField.value = item.carbs;
      // vitField = item.vitamins;
      // minField = item.minerals;

    }
    function clearSuggestions() {
      let suggestionsList = document.getElementById("suggestions");
      suggestionsList.innerHTML = "";
      suggestionsList.style.display = "none";
    }
    function clearForms() {
      document.getElementById("newItemInput").value = "";
      // document.getElementById("newItemDesc").value = "";
      document.getElementById("newItemQty").value = "";
      document.getElementById("newItemCal").value = "";
      document.getElementById("newItemProtein").value = "";
      document.getElementById("newItemFat").value = "";
      document.getElementById("newItemCarbs").value = "";
      document.getElementById("newItemFat").value = "";
      document.getElementById("newItemMin").value = "";
      document.getElementById("newItemVit").value = "";


    }
    function enterNewFood() {

    }


    /*******************************/
    /********* HOME PAGE ***********/
    /*******************************/

    // * Rendering dates as needed for our app * //
    const options = { weekday: 'short', year: 'numeric', month: 'long', day: 'numeric' };
    const currentDate = new Date();
    const formattedDate = currentDate.toLocaleDateString('en-US', options);
    const dateElement = document.getElementById("home-date");
    dateElement.innerText = formattedDate;

    // Code to open and close the table rows
    // Get all parent rows
    const parentRows = document.querySelectorAll(".parent-nutrient");
    // Loop through each parent row and attach a click event listener
    parentRows.forEach((row) => {
      row.addEventListener("click", () => {
        // Toggle the "open" class on the arrow to rotate it
        row.querySelector(".arrow").classList.toggle("open");
        // Get the next sibling row
        let nextRow = row.nextElementSibling;
        // Loop through all sibling rows until a parent row is found
        while (nextRow && !nextRow.classList.contains("parent-nutrient")) {
          // Toggle the "show" class on the child row to display/hide it
          nextRow.classList.toggle("show");
          // Get the next sibling row
          nextRow = nextRow.nextElementSibling;
        }
      });
    });

    // document.getElementById("calories-burned-populate").innerHTML = calculateTotalCalories();


    // CHARTS //
    
    var barColors = ["red", "green", "blue", "orange", "brown"];

    new Chart("myChart", {
      type: "pie",
      data: {
        labels: xValues,
        datasets: [{
          backgroundColor: barColors,
          data: yValues
        }]
      },
      options: {
        title: {
          display: true,
          text: "Breakdown of all Nutrients Consumed",
          fontColor: '#FFF7E9',
          fontSize: 30
        },
        legend: {
          labels: {
            fontSize: 20,
            fontColor: '#FFF7E9'
          }
        }
      }
    });

  </script>
</body>

</html>